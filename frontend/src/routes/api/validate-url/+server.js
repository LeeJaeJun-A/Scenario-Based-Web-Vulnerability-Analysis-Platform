import { json } from '@sveltejs/kit';

export async function GET({ url }) {
    const targetUrl = url.searchParams.get('url');

    try {
        const response = await fetch(targetUrl, { method: 'HEAD' });
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }
        return json({ valid: true });
    } catch (error) {
        return json({ valid: false, error: error.message }, { status: 400 });
    }
}